# 美团Leaf源码解析

### 架构设计原则？

KPA架构师不是架构师（KPI+PPT+API）

单机性能没到瓶颈，你聊什么分布式和微服务还有云原生？玩呢？刷KPI？钱多？

### 高并发优化，如何榨干整台服务器？

1、资源锁细粒度化（db设计时，加business字段，用来区分业务类型；加锁时只给特定的业务类型加锁）

2、业务使用锁细粒度化（业务代码先释放锁再处理数据）

3、无锁化（真·无锁 threadlocal，假·无锁 CAS）

4、异步+线程池（将串行计算业务改为异步的CompletableFuture）

![image-20210102093353158](../../images/image-20210102093353158.png)