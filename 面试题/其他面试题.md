

## 线程、Redis相关的基础知识

聊项目经历

项目介绍与遇到的难点

设计模式了解多少

讲一讲观察者模式

topK问题

讲一讲观察者模式

项目（redis，十几万条已排好的数据在redis里，这时新来了一条数据，怎么快速更新排行榜，这个问题说了好久没说到面试官想要的答案）

Web方面用过什么架构，自学过什么框架

工厂模式

OOP设计原则

 

## Java基础

Java基础，虚拟机， 内存分配，垃圾回收，锁，多线程，nio，hashmap，数据库存储引擎，索引。暂时这些关键字吧

 

Java虚拟机

Java 8的新特性

Lambda的原理

ConcureentHashMap的原理、结构

ConcurrentHashMap统计数据总量时的流程。

Java中有哪些exception

Java并发了解多少

synchronized关键字可以修饰类吗？

说一下JMM与GC算法

说一下有关并发和锁的所有你知道的东西（synchronized，reenrantLock，AtomicInteger等等巴拉巴拉说了10分钟）

Java和C语言的差别

C++和Java语言的差别

Java的引用说一说

Java和C的内存（我说C我了解的不到这个深度..然后说了JVM内存结构）

Java集合（主要说了map和List）挑几个重点的说

ArrayList vs LinkedList

HashMap原理

JDK 1.8对HashMap的改进

多线程见协作与通信方式

Synchronized vs Lock

ReentrantLock优点

CAS

自旋锁

类加载过程

内存泄漏与内存溢出，及其原因

GC原理及优化策略

Java的Exception类型

讲一下Java的静态代理和动态代理

String是基本数据类型吗

int和Integer有什么区别？

HashMap和HashTable的区别，及其实现原理。

ArrayList/HashMap的源码、如何实现源码

冒泡排序、快速排序

单例模式/工厂模式/动态工厂

谈谈你对面向对象的理解

数组和链表的区别

HashMap、ConcurrentHashMap。几乎把里面的所有函数都讲了一遍

volatile

jvm数据区域

新生代大小参数是啥

堆的分类新生代老年代

java怎么与数据库交互

数据库中间件了解吗

 

## Spring

对Spring的理解

Spring的IOC和AOP

Bean的创建过程

spring bean重名了怎么办？然后问了一个场景题，涉及到分布式事务了

Spring bean的生命周期和作用域

IOC有什么用：解耦

SpringMVC过程

SpringMVC源码看了没，前端控制器怎么用的，我把核心组件和流程给他说了

DI的实现机制（反射啥的）

spring各种原理。xml怎么解析，aop原理

springcloud源码看过吗？（没有，俺说俺知道各组件原理，但是面试官只问源码）

 

 

## MySQL

事务ACID/隔离级别

数据库四种隔离级别

索引

对索引有什么了解，用过哪些

索引的优缺点

锁

Delete和Trunc的差别

sql注入知道吗 

 

因为redis cluster涉及到了hash槽，于是又开始问hash 算法的原理，数据结构、常用hash函数，以及concurrentHashMap实现原理。又继续问hash的冲突处理方案，因为提到了开链法和红黑树，又开始问红黑树的原理，最后以“红黑树的查询复杂度是多少”结束这一回合。

 

然后问多线程，项目中使用多线程的地方，Java中的线程池了解过吗，线程池中的几个参数及其原理？项目中使用过线程池吗？具体场景描述一下。

 

1.实现个队列

2.写段程序说明虚函数的动态绑定

3.虚函数表在内存中是什么样子的？（不知道）

4.写过多线程吗？（不会，之前是搞图像的）

\5. printf("hello") 是怎么能在电脑上显示hello的？（不知道，一脸懵）

 

7.Mybatis工作原理。

8.Synchronized是重量级的锁吗？能实现轻量锁吗？

9.Synchronized加锁流程？monitorexit和monitorenter解释一下？

10.JVM中Synchronize锁机制的实现。

11.Mysql锁的粒度划分以及原理、性能、使用时注意事项。

12.ACID。

13.HashMap数据结构相关

14.红黑树的概念，优势

15.B+树与B树的区别

 

 

## 计算机基础

1）、数据结构、算法、网络通讯、软件工程、java基础。

数据结构：大学基础学科，好好复习。

算法：二叉树、红黑树之类的算法的必会，最好手写。

网络通讯：HTTP、TPC通讯的原理，最好有写过客户端服务的demo的经验。

 

2）、每一面都会有一个算法题，考察逻辑能力。

对于leetcode的hot前100，剑指offer的67道题，自然必须要会的。算法也不只是可以写出来就ok了，最好能更进一步思考。

 

 

## 幂等律

一个请求与多个请求等效

一个用户的同一请求（比如充值操作）由于网络问题等多次发送给服务端，怎么实现幂等？

 

面试官针对我的下一步学习计划提建议，结果面试官说几次想引导我去回答更深入的问题，都没引导过去 [捂脸]。之后针对面试官的建议，把缺漏的知识点再整理了一遍。面试官当时说大概一周会有结果，等了一周半，以为凉了，就抱着必死的决心，向面试官问了下情况，竟然就接到了二面视频面试邀请。结果面试被拖后(鸽)了。

 

Object有哪些方法

你刚说的clone浅复制和深复制有什么区别，举个例子
 equals如果不重写hashCode会怎样，举个例子，equals默认情况下是返回什么
 4.容器了解吗，说下
 5.hashMap的put方法说下，它是安全的嘛，举个例子，多线程同时put会有什么问题
 6.怎么让他安全呢（我说了table,synchroniedMap,concurrentHashMap）,说下他们三个的区别
 7.concurrentHashMap原理
 8.内存泄漏，怎么防止，localThread
 9.wait和sleep区别
 10.wait应用场景
 11.并发包下面用过哪些，我说闭锁栅栏和信号量，分别说说
 12.消费者生产者模式怎么设计的，如果中间一个篮子只能放一个苹果，生产者和消费者各只有一个，怎么设计，如果很多线程又怎么设计
 13.死锁什么情况下会出现，举个例子，怎么预防呢
 14.A和B相互转账可能会发生死锁，设计程序避免这种情况
 15.说下常见的数据结构
 16.栈和链表的区别，你自己怎么设计一个栈，栈用在什么地方，举个例子
 17.volatile说下用处，举个例子
 18.有哪些排序算法，说下冒泡和选择
 19.tcpip http https分别说下，https怎么做到安全的
 20.数据库一张表，有学生姓名，成绩，课程名，找到所有成绩大于80的学生
 21.说下数据库的设计思想
 22.JVM分区，分别干什么用的
 23.String s = new String("abc");在上面的分区中怎么玩的
 24.说下垃圾回收机制，分代区域怎么分的
 25.你的图书管理系统登录模块怎么实现的
 26.如何识别是同一个用户
 27.session机制

28.用户登录密码加密

29.一个反射机制写个工具类扫描一个包下面的类方法什么的是否符合java编写规范 

30.ArrayList和LinkedList的区别

 


## 网络

http请求头部？ 

session和cookie区别 

get post区别

linux相关的知道吗 

tcp为什么是可靠的

哪些情况可以用udp

四次挥手

 

 

“你有什么要问的？”对我有什么建议；刚刚问到的一些问题是怎么解决的

 

## Linux

跑程序时候发现服务器系统内存占用100%怎么办

 

 

## Redis

阿里

redis网络协议，redis为什么单进程，为什么redis的decsby原子性

 

进程通信方式

进程通信中的管道原理

linux的io模型

linux的shell脚本

RocketMQ事务性原理

redis数据结构有哪些，底层结构分别是怎么实现的→源码刨析

 

两个超大的文件，里面各装有上百万个数，还有无序的，数字的大小范围是0-500w左右。如何求两个文件中的重复的数据

 

 

## 某厂

说项目

我的项目里面比较好的就是一个三次迭代的app(python爬虫(有加密参数)+cookie+resdis)，说了20分钟，说完面试官问这你自己想出来的？我果断回答是🤣(虽然确实我一个人做的)。

之后就是问题，问了11个好像。没有顺序之分下面的，想到哪个写哪个。

1.synchronized升级过程

2.synchronized和reentranlock的区别

3.常见设计模式的应用场景讲一下，注意不是让你说有哪些设计模式，而是项目之中的具体应用

4.设计一张表，你会怎样设计索引

5.java锁再说一下应用场景，举个具体的场景

6.大型复杂项目之中，不停进行内存回收，jvm怎么调优

7.大型复杂项目之中，你怎么设计数据库，java代码，缓存

8.数据库之中有哪些锁

9.说一下进程和线程的区别

10.说一下死锁

11.看你很了解分布式，说一下分布式，说了redis一致性哈希,redis-cluster

12.公平锁，非公平锁，可重入锁等。

13.hashmap和concurrenthashmap的区别，原理(注意jdk版本不同concurrenthashmap实现不同)

14.ThreadLock

然后说我原理方面和应用方面可以，但是缺少大型项目开发经验，后面应该多参与一些大型项目。

最后问了我感觉你还可以，为什么笔试一个题都没做出来，通过0%，我说我算法没有达到做出两道hard级别的动态规划题的程度，面试官表示理解，说后面补一下。

 

这次面试经历很好，说了53分钟。

问的题目比较常规，但是场景题比较发散，看你经验了感觉。

 

第3个和第7个说得不好，只能根据已有知识进行分析，然后我说我不了解，只能分析这么多，面试官说你不了解就不问这个。

 

第6个我说了用单例模式来防止对象的频繁创建更新，面试官说我误解了他的意思，是想问我jvm命令的，这个不会。

 

其他题都是回答完直接过，不过第14题没回答出来，给忘记了。

 

## 钉钉

1、介绍项目

2、RocketMQ事务性原理是什么

3、RocketMQ的内部结构是什么，看过RocketMQ的源码吗（没有，卑微.jpg）

4、RocketMQ是2PC还是3PC的

5、数据库索引B+树

6、Http状态码302、204、500、504

7、线程池的拒绝策略有哪些

8、JDK8的新特性有哪些

 

## 字节

1、自我介绍

2、问项目相关

3、为什么高并发使用redis不用mysql

4、redis的数据结构

5、zset

6、redolog、undolog、binlog

7、HashMap

8、TCP四次挥手的时候close-wait过多怎么办

9、四次挥手的内容

10、进程和线程的区别

代码：

5、堆排序

6、单例模式

7、最多会议场数问题

8、字符串翻转

 

1.讲讲你的项目

2.讲讲你用netty干了什么

3.讲讲netty怎么提升的性能

4.讲讲你项目的数据库设计思路（这个题真的我太懵了，太发散，但是最后他说其实就是想问我用的是第几范式，反正这个我真的就胡说一通，凉就凉这儿了）

5.你开发用于登录功能的时候怎么保证的刷新后登录状态不变（我说用到cookie和session结合，互传sessionid校验）

6.你这种方法不安全，cookie被劫持怎么办（我说我这小本生意，小项目，不需要考虑劫持，他说，emmm，也是hhh）

7.问基础，讲一下hashmap（扩容机制讲一下）

8.如果持续增大，怎么扩容，（我说用resize加桶，但是我应该说一下扩大一倍的，忘说了 应该有瑕疵）

9.hashmap为啥会有线程安全问题（感谢一个老哥的面经，我今天早上刚看了，扯了一下1.7的头插，1.8的尾插，死链）

10.有了尾插法线程安全问题解决了吗（我说没有，只要存在put碰撞，就会有，我感觉我说的有点假大空）

11.concurrenthashmap是怎么解决这个问题的（我说1.7用的reentrantlock 加锁1.8用的synchronized锁和cas算法）

12.jvm堆的结构划分（我说分了新生代和老年代 不知道说的对不对）

13.新生代和老年代的gc算法（我说新生代死的多，用复制，老年代用标记整理清除）

14.新生代怎么转入老年代的（1.复制算法，2，大对象直接进，3，年龄计数器）

15.数据库索引的原理和优缺点（死记硬背的东西讲了一波）

16.建索引的策略（常查询数据建索引，较长的数据列键前缀索引，索引这一块我真没用过，我也给他实话实话没用过这都是死记硬背）

 

 

 

 

## Java基础

#### 集合

集合分为两大块：java.util包下的非线程安全集合和java.util.concurrent下的线程安全集合。

 

##### List

ArrayList与LinkedList的实现和区别

 

##### Map

HashMap：了解其数据结构、hash冲突如何解决（链表和红黑树）、扩容时机、扩容时避免rehash的优化

LinkedHashMap：了解基本原理、哪两种有序、如何用它实现LRU

TreeMap：了解数据结构、了解其key对象为什么必须要实现Compare接口、如何用它实现一致性哈希

 

##### Set

Set基本上都是由对应的map实现，简单看看就好

##### 常见问题

hashmap如何解决hash冲突，为什么hashmap中的链表需要转成红黑树？

hashmap什么时候会触发扩容？

jdk1.8之前并发操作hashmap时为什么会有死循环的问题？

hashmap扩容时每个entry需要再计算一次hash吗？

hashmap的数组长度为什么要保证是2的幂？

如何用LinkedHashMap实现LRU？

如何用TreeMap实现一致性hash？



#### 线程安全的集合

- Collections.synchronized 了解其实现原理

- CopyOnWriteArrayList 了解写时复制机制、了解其适用场景、思考为什么没有ConcurrentArrayList

- ConcurrentHashMap 了解实现原理、扩容时做的优化、与HashTable对比。

- BlockingQueue 了解LinkedBlockingQueue、ArrayBlockingQueue、DelayQueue、SynchronousQueue

##### 常见问题

- ConcurrentHashMap是如何在保证并发安全的同时提高性能？

- ConcurrentHashMap是如何让多线程同时参与扩容？

- LinkedBlockingQueue、DelayQueue是如何实现的？

- CopyOnWriteArrayList是如何保证线程安全的？



#### 并发

##### synchronized

了解偏向锁、轻量级锁、重量级锁的概念以及升级机制、以及和ReentrantLock的区别

 

##### CAS

了解AtomicInteger实现原理、CAS适用场景、如何实现乐观锁

 

##### AQS

了解AQS内部实现、及依靠AQS的同步类比如ReentrantLock、Semaphore、CountDownLatch、CyclicBarrier等的实现

 

##### ThreadLocal

了解ThreadLocal使用场景和内部实现

 

##### ThreadPoolExecutor

了解线程池的工作原理以及几个重要参数的设置

 

##### 常见问题

- synchronized与ReentrantLock的区别？

- 乐观锁和悲观锁的区别？

- 如何实现一个乐观锁？

- AQS是如何唤醒下一个线程的？

- ReentrantLock如何实现公平和非公平锁是如何实现？

- CountDownLatch和CyclicBarrier的区别？各自适用于什么场景？

- 适用ThreadLocal时要注意什么？比如说内存泄漏?

- 说一说往线程池里提交一个任务会发生什么？

- 线程池的几个参数如何设置？

- 线程池的非核心线程什么时候会被释放？

- 如何排查死锁？

 

#### 引用

- 了解Java中的软引用、弱引用、虚引用的适用场景以及释放机制、

##### 常见问题

- 软引用什么时候会被释放

- 弱引用什么时候会被释放

#### 类加载

- 了解双亲委派机制

##### 常见问题

- 双亲委派机制的作用？

- Tomcat的classloader结构

- 如何自己实现一个classloader打破双亲委派



#### IO

了解BIO和NIO的区别、了解多路复用机制

##### 常见问题

- 同步阻塞、同步非阻塞、异步的区别？

- select、poll、eopll的区别？

- java NIO与BIO的区别？

- reactor线程模型是什么?



#### JVM

- GC：垃圾回收基本原理、几种常见的垃圾回收器的特性、重点了解CMS（或G1）以及一些重要的参数

- 内存区域：能说清jvm的内存划分

##### 常见问题

- CMS GC回收分为哪几个阶段？分别做了什么事情？

- CMS有哪些重要参数？

- Concurrent Model Failure和ParNew promotion failed什么情况下会发生？

- CMS的优缺点？

- 有做过哪些GC调优？

- 为什么要划分成年轻代和老年代？

- 年轻代为什么被划分成eden、survivor区域？

- 年轻代为什么采用的是复制算法？

- 老年代为什么采用的是标记清除、标记整理算法

- 什么情况下使用堆外内存？要注意些什么？

- 堆外内存如何被回收？

- jvm内存区域划分是怎样的？



#### 中间件、存储、以及其他框架

Spring：bean的生命周期、循环依赖问题、spring cloud（如项目中有用过）、AOP的实现、spring事务传播

##### 常见问题

java动态 ***和 cglib 动态*** 的区别（经常结合spring一起问所以就放这里了）

spring中bean的生命周期是怎样的？

属性注入和构造器注入哪种会有循环依赖的问题？

 

## Dubbo（或其他Rpc框架）

了解一个常用RPC框架如Dubbo的实现：服务发现、路由、异步调用、限流降级、失败重试

##### 常见问题

Dubbo如何做负载均衡？

Dubbo如何做限流降级？

Dubbo如何优雅的下线服务？

Dubbo如何实现异步调用的？

 

## RocketMq（或其他消息中间件）

了解一个常用消息中间件如RocketMq的实现：如何保证高可用和高吞吐、消息顺序、重复消费、事务消息、延迟消息、死信队列

##### 常见问题

- RocketMq如何保证高可用的？

- RocketMq如何保证高吞吐的？

- RocketMq的消息是有序的吗？

- RocketMq的消息局部顺序是如何保证的?

- RocketMq事务消息的实现机制？

- RocketMq会有重复消费的问题吗？如何解决？

- RocketMq支持什么级别的延迟消息？如何实现的？

- RocketMq是推模型还是拉模型？

- Consumer的负载均衡是怎么样的？



## Redis（或其他缓存系统）

redis工作模型、redis持久化、redis过期淘汰机制、redis分布式集群的常见形式、分布式锁、缓存击穿、缓存雪崩、缓存一致性问题

##### 常见问题

- redis性能为什么高?

- 单线程的redis如何利用多核cpu机器？

- redis的缓存淘汰策略？

- redis如何持久化数据？

- redis有哪几种数据结构？

- redis集群有哪几种形式？

- 有海量key和value都比较小的数据，在redis中如何存储才更省内存？

- 如何保证redis和DB中的数据一致性？

- 如何解决缓存穿透和缓存雪崩？

- 如何用redis实现分布式锁？



## Mysql

事务隔离级别、锁、索引的数据结构、聚簇索引和非聚簇索引、最左匹配原则、查询优化（explain等命令）

##### 常见问题

- Mysql(innondb 下同) 有哪几种事务隔离级别？

- 不同事务隔离级别分别会加哪些锁？

- mysql的行锁、表锁、间隙锁、意向锁分别是做什么的？

- 说说什么是最左匹配？

- 如何优化慢查询？

- mysql索引为什么用的是b+ tree而不是b tree、红黑树

- 分库分表如何选择分表键

- 分库分表的情况下，查询时一般是如何做排序的？



## zk

zk大致原理（可以了解下原理相近的Raft算法）、zk实现分布式锁、zk做集群master选举

##### 常见问题

- 如何用zk实现分布式锁，与redis分布式锁有和优缺点



## HBase（如简历有写）

HBase适用的场景、架构、merge和split、查写数据的流程。

 

 

## 其他经验

面试官问“你对A框架有了解吗”，如果你没有接触过，你可能可以用“我没有使用过A框架，我在项目中使用的是B框架”这样的回答来代替“没有”，说不定面试官AB框架都了解，那他就可以问你B框架的问题了呢。

 

面试官问“你说你用到XXX技术，那你对他的原理有了解过吗”，你可能只是在项目中使用到这个技术，而没有去研究它，更不用说去阅读源码，那你可以思考后回答“我没有去详细了解过他的原理，但是从我使用的角度来看，我觉得他的底层可能是 xxxxxxx 这样实现的”

 

面对这种问题时，你要做的就不再是答对问题，而是向面试官展示你的思考过程，毕竟对于校招生来说，发展潜力是企业最关注的，所以面试时一定要尽力展示你的思维能力，而不要单纯的用背题去应对面试(毕竟面试题目不可能是固定的)

 

## 三年经验 腾讯面试题 2020-6-22

##### 第一面:

基础:synchronized底层实现,线程池底层实现(可以从阿里规范为什么介意自定义线程池说起)

项目:秒杀模块系统设计,给出了秒杀优惠券的架构图让说说系统存在的问题和怎么避免

##### 第二面:

基础:hashmap和concurrentHashMap底层实现(可从1.7和1.8角度来区分说明)

项目:订单系统状态机模式听过没,权限系统怎么做的,秒杀扣减库存,redis宕机后可能出现主从延时问题,让库存多扣怎么处理

##### 第三面:

项目:怎么解决高并发秒杀场景下,热点商品的秒杀倾斜问题（思路:分段）

一般秒杀是个计数器，就一个key，如果是重点商品会产生单key过热问题，cpu飙升，最简单的办法是主从集群，从只管读，主才管秒杀，前面加各种拦截，发现数量不足了就不写了，分段的话我只能理解是单key拆多key，面向不同区域的人群抢不同的key



## 百度

- syncronized 和 reentrantlock 的底层实现及重入的底层原理

